(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{168:function(t,s,n){t.exports=n.p+"assets/img/addhome1.36845a70.png"},169:function(t,s,n){t.exports=n.p+"assets/img/homeiconcompare.e9f4e328.png"},170:function(t,s,n){t.exports=n.p+"assets/img/service_worker.17a16be4.png"},171:function(t,s,n){t.exports=n.p+"assets/img/lifecycle.4584512c.jpg"},185:function(t,s,n){"use strict";n.r(s);var a=[function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"pwa简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pwa简介","aria-hidden":"true"}},[this._v("#")]),this._v(" PWA简介")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-pwa简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-pwa简介","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. PWA简介")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("1) 背景")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("无独立入口，依赖浏览器")]),this._v(" "),s("li",[this._v("无法离线使用")]),this._v(" "),s("li",[this._v("用户体验无法媲美Native（网络下载）")]),this._v(" "),s("li",[this._v("无消息推送功能")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("2) PWA 是什么")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("全称为Progressive Web Apps（渐进式web APP），是一种提升 Web App用户体验的新方法，能给用户原生应用的体验。"),s("br"),this._v("\nPWA不指某一项技术，包括一系列关键技术,可以让web APP拥有Native APP的特征。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("3) PWA 解决什么问题")]),s("br"),this._v(" "),s("em",[this._v("改善用户体验，媲美Native")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("离线使用：提高加载速度，缓存技术结合（Service Worker）实现离线使用")]),this._v(" "),s("li",[this._v("可安装：不依赖浏览器作为入口，添加主屏幕，全屏执行（Web App Manifest）")]),this._v(" "),s("li",[this._v("消息推送：未启用应用时主动发送推送通知（Push Notification ）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("4) PWA 特征")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("Reliable  - Load instantly and never show the downasaur, even in uncertain network conditions."),s("br"),this._v("\n可靠 - 即使在不确定的网络条件下，也能立即加载并永不显示停机"),s("br"),this._v("\nFast  - Respond quickly to user interactions with silky smooth animations and no janky scrolling."),s("br"),this._v("\n快速 - 以平滑动画的交互快速响应用户，不会晃动滚动。"),s("br"),this._v("\nEngaging  - Feel like a natural app on the device, with an immersive user experience."),s("br"),this._v("\n粘性 - 感觉就像设备上的自然应用一样，具有身临其境的用户体验")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-应用案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-应用案例","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 应用案例")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("豆瓣：https://m.douban.com/")]),this._v(" "),s("li",[this._v("饿了么： https://h5.ele.me/")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-项目要解决的实际问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-项目要解决的实际问题","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 项目要解决的实际问题")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("在线资源的离线缓存")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-关键技术之web-app-manifest"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-关键技术之web-app-manifest","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 关键技术之Web App Manifest")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("1） 功能")]),s("br"),this._v("\n解决web应用入口问题, 使 web 应用能够像原生应用一样被添加到主屏、全屏执行")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("2）定义")]),s("br"),this._v("\nWeb App Manifest是一个json格式的文件清单，定义应用程序的相关数据，比如：名称，作者，图标等等。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("3）使用")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("添加manifest.json")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('<link rel="manifest" href="/manifest.json">\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("定义manifest.json")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javaScript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"appName"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//APP name")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"short_name"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cooking"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//APP Name简称")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start_url"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../home.html"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//pwa启动入口页")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" 访问模式 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"display"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"standalone"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"background_color"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#fff"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//背景色")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" pwa访问范围，作用域外的 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),t._v(" 就会打开浏览器而不会在当前 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PWA")]),t._v(" 里继续浏览。饿了么应用，只可访问一个页面 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scope"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"description"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A simply app for searching cookbooks."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" 桌面图标定义 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IOS")]),t._v("不支持 "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IOS")]),t._v("其他方式指定 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icons"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../images/app-icon.jpg"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sizes"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"48x48"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/jpg"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../images/app-icon.jpg"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sizes"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"52x52"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"type"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image/jpg"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("实例"),s("br"),this._v("\niOS 没有提示，需手动添加")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:n(168),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("pwa应用和原生应用桌面图标对比"),s("br"),this._v("\n第一排：pwa应用；第二排：原生应用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:n(169),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_5-核心技术之service-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-核心技术之service-worker","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. 核心技术之Service Worker")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("1）Service Worker是什么")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("Service Worker是浏览器在后台独立于网页运行的一段JavaScript脚本.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("类似于浏览器与网络之间的代理，可以拦截、处理、响应网络请求；配合Cache Storage API，可控制文件粒度的缓存，实现 web 应用的离线访问。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:n(170),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("2）主要功能")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("web APP实现持久离线缓存，离线内容开发者可控，（缓存机制依赖 Cache API ）pwa 应用离线使用的核心技术")]),this._v(" "),s("li",[this._v("独立于网页的worker线程，可拦截和处理网络请求（依赖HTML5 fetch API）")]),this._v(" "),s("li",[this._v("向客户端推送消息（Web Push）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("3）特性")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("不能直接操作 DOM")]),this._v(" "),s("li",[this._v("安全，必须在HTTPS下才能工作（localhost例外）")]),this._v(" "),s("li",[this._v("异步实现，内部大都是通过 Promise 实现")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("3）兼容性")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("4）简介")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("生命周期")]),this._v(" "),s("img",{attrs:{src:n(171),alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("注册，调用serviceWorker的register方法注册，浏览器在后台进行安装动作")]),this._v(" "),s("li",[this._v("安装，开始安装时会触发install事件，这个阶段可以进行静态资源缓存操作")]),this._v(" "),s("li",[this._v("激活，安装完成进入激活状态，触发 activate 事件，这个阶段可以更新旧版本、清理缓存等操作；监听事件（事件驱动）")]),this._v(" "),s("li",[this._v("销毁")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("注意")]),s("br"),this._v("\n当第一次加载页面时，Service Worker 还没有激活，所以它不会处理任何请求。只有当它安装和激活后，才能控制在其范围内的一切。这意味着，只有你刷新页面或者导航到另一个页面，Service Worker 内的逻辑才会启动。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_6-实战离线缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-实战离线缓存","aria-hidden":"true"}},[this._v("#")]),this._v(" 6. 实战离线缓存")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javaScript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'serviceWorker'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" navigator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册 service Worker")]),t._v("\n  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'load'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    navigator"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serviceWorker"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'serviceworker.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("scope"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("registration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册成功")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ServiceWorker registration successful with scope: '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" registration"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scope"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册失败")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ServiceWorker registration failed: '")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javaScript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cacheFiles "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'home.html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./js/home.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./js/libs/zepto.min.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./css/base.css'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./css/reset.css'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./css/home.css'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听 service worker 的 install 事件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'install'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果监听到了 service worker 已经安装成功的话，就会调用 event.waitUntil 回调函数")]),t._v("\n  event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitUntil")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// caches是一个 CacheStorage 对象，使用open()方法打开一个缓存，缓存通过名称进行区分。")]),t._v("\n    caches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xiachufang-caches'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cache")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过 cache 缓存对象的 addAll() 方法缓存文件。")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" cache"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAll")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cacheFiles"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javaScript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fetch'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("respondWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    caches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如何有缓存的话，那么就直接返回缓存，否则直接获取源文件")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"附录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#附录","aria-hidden":"true"}},[this._v("#")]),this._v(" 附录")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h6",{attrs:{id:"_1）博客"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1）博客","aria-hidden":"true"}},[this._v("#")]),this._v(" 1）博客")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h6",{attrs:{id:"_2）教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2）教程","aria-hidden":"true"}},[this._v("#")]),this._v(" 2）教程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h6",{attrs:{id:"_3）书籍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3）书籍","aria-hidden":"true"}},[this._v("#")]),this._v(" 3）书籍")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h6",{attrs:{id:"_4）开发工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4）开发工具","aria-hidden":"true"}},[this._v("#")]),this._v(" 4）开发工具")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("chrome://inspect/#service-workers")])])}],e=n(0),r=Object(e.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),n("p",[t._v("当前web应用劣势：")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),n("p",[n("a",{attrs:{href:"https://openweb.baidu.com/pwa-future/",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片引自：https://openweb.baidu.com/pwa-future/"),n("OutboundLink")],1)]),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://jakearchibald.github.io/isserviceworkerready/",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击查看浏览器支持情况"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5a695fb7f265da3e5234b2d6",target:"_blank",rel:"noopener noreferrer"}},[t._v("iOS 11.3 和 macOS 10.13.4开始支持IOS，点击这里查看相关文章 "),n("OutboundLink")],1)])]),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),n("p",[n("a",{attrs:{href:"https://huangxuan.me/2017/02/09/nextgen-web-pwa/",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片引自：https://huangxuan.me/2017/02/09/nextgen-web-pwa/"),n("OutboundLink")],1)]),t._v(" "),t._m(38),t._v(" "),n("p",[n("strong",[t._v("支持的事件")]),n("br"),t._v(" "),n("strong",[t._v("install")]),t._v("、"),n("strong",[t._v("activate")]),t._v("、"),n("strong",[t._v("message")]),t._v("、"),n("strong",[t._v("fetch")]),t._v("、"),n("strong",[t._v("push")]),t._v("、"),n("strong",[t._v("sync")]),n("br"),t._v("\n详细内容请参考"),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN"),n("OutboundLink")],1)]),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),n("p",[t._v("1). 注册service worker")]),t._v(" "),t._m(41),n("p",[t._v("2). 缓存文件")]),t._v(" "),t._m(42),n("p",[t._v("3).监听fetch缓存")]),t._v(" "),t._m(43),t._m(44),t._v(" "),t._m(45),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://openweb.baidu.com/pwa-future/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PWA 将带来新一轮大前端技术洗牌？"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://huangxuan.me/2017/02/09/nextgen-web-pwa/",target:"_blank",rel:"noopener noreferrer"}},[t._v("下一代 Web 应用模型 —— Progressive Web App"),n("OutboundLink")],1)])]),t._v(" "),t._m(46),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://developers.google.cn/web/progressive-web-apps/",target:"_blank",rel:"noopener noreferrer"}},[t._v("google官网"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://lavas.baidu.com/pwa",target:"_blank",rel:"noopener noreferrer"}},[t._v("百度pwa教程"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN"),n("OutboundLink")],1)])]),t._v(" "),t._m(47),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://github.com/SangKa/PWA-Book-CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("第一本中文PWA"),n("OutboundLink")],1),t._v("（官方告示预计2018年5月份正式出版）")])]),t._v(" "),t._m(48),t._v(" "),t._m(49)])},a,!1,null,null,null);s.default=r.exports}}]);